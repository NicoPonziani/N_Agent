# ============================================
# APPLICATION PROPERTIES - PRODUCTION PROFILE
# ============================================
# Profile: prod
# Use: java -jar app.jar --spring.profiles.active=prod
# ============================================

spring:
  application:
    name: n_agent
  webflux:
    base-path: /code-agent
  data:
    mongodb:
      uri: ${MONGODB_URI}
  ai:
    openai:
      api-key: ${OPEN_AI_KEY}
      chat:
        options:
          model: ${AI_MODEL:gpt-4o-mini}
          temperature: ${AI_TEMPERATURE:0.2}
          max-tokens: ${AI_MAX_TOKENS:2000}
          frequency-penalty: 0.5
          presence-penalty: 0.3
      connection-timeout: 15s
      read-timeout: 180s

server:
  port: ${SERVER_PORT:8080}
  error:
    include-message: never
    include-stacktrace: never
  compression:
    enabled: true
    mime-types: application/json,application/xml,text/html,text/xml,text/plain

webhook:
  github:
    secret: ${GITHUB_WEBHOOK_SECRET}

github:
  app:
    id: ${GITHUB_APP_ID}
    private-key-path: ${GITHUB_PRIVATE_KEY_PATH}
  api:
    base-url: https://api.github.com
    installation-token-url: https://api.github.com/app/installations/{installation_id}/access_tokens

# ============================================
# LOGGING CONFIGURATION - PRODUCTION
# ============================================
logging:
  level:
    root: WARN
    it.np.n_agent: INFO
    org.springframework.ai: WARN
    org.springframework.data.mongodb: WARN
    org.springframework.web: WARN
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} %-5level [%thread] %logger{36} - %msg%n"
  file:
    name: logs/n-agent.log
    max-size: 50MB
    max-history: 30

# ============================================
# ACTUATOR - PRODUCTION (Minimal exposure)
# ============================================
management:
  endpoints:
    web:
      exposure:
        include: health,info
      base-path: /actuator
  endpoint:
    health:
      show-details: never

